<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>I2C Library: i2c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">I2C Library
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('i2c_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">i2c.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements functions used to interact with the I2C bus and peripheral devices.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;plib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="i2c_8h_source.html">i2c.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for i2c.c:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c__incl.png" border="0" usemap="#i2c_8c" alt=""/></div>
<map name="i2c_8c" id="i2c_8c">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a01cfbcaab1fb1d818fbe26109d9dd087"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a01cfbcaab1fb1d818fbe26109d9dd087">I2C_StartTransfer</a> (<a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *port, BOOL restart)</td></tr>
<tr class="memdesc:a01cfbcaab1fb1d818fbe26109d9dd087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set start condition for I2C bus.  <a href="#a01cfbcaab1fb1d818fbe26109d9dd087">More...</a><br /></td></tr>
<tr class="separator:a01cfbcaab1fb1d818fbe26109d9dd087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f251044af22435f4028967ecf838053"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a0f251044af22435f4028967ecf838053">I2C_StopTransfer</a> (<a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *port, uint32_t delay_Ms)</td></tr>
<tr class="memdesc:a0f251044af22435f4028967ecf838053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set stop condition for I2C bus.  <a href="#a0f251044af22435f4028967ecf838053">More...</a><br /></td></tr>
<tr class="separator:a0f251044af22435f4028967ecf838053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069cdc2bec983c627606ee4ef52d6155"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a069cdc2bec983c627606ee4ef52d6155">I2C_SendByte</a> (<a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *port, uint8_t data)</td></tr>
<tr class="memdesc:a069cdc2bec983c627606ee4ef52d6155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a single byte of data.  <a href="#a069cdc2bec983c627606ee4ef52d6155">More...</a><br /></td></tr>
<tr class="separator:a069cdc2bec983c627606ee4ef52d6155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4407c31abf6dc307ccd22973b1a816"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a0b4407c31abf6dc307ccd22973b1a816">I2C_ReadByte</a> (<a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *port, uint8_t *data, BOOL ackByte)</td></tr>
<tr class="memdesc:a0b4407c31abf6dc307ccd22973b1a816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single byte of data and optionally send an acknowledgement signal.  <a href="#a0b4407c31abf6dc307ccd22973b1a816">More...</a><br /></td></tr>
<tr class="separator:a0b4407c31abf6dc307ccd22973b1a816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c6a720c14c9d481945c51dbf6ae07a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aa8c6a720c14c9d481945c51dbf6ae07a">I2C_SendAddr</a> (<a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *device, BOOL isReadRequest)</td></tr>
<tr class="memdesc:aa8c6a720c14c9d481945c51dbf6ae07a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmits the address to a target with the appropriate read/write bit set.  <a href="#aa8c6a720c14c9d481945c51dbf6ae07a">More...</a><br /></td></tr>
<tr class="separator:aa8c6a720c14c9d481945c51dbf6ae07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a468fc9a7b3aed2267864cf1b37534ea3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a468fc9a7b3aed2267864cf1b37534ea3">I2C_InitPort</a> (<a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *port, uint32_t pbClk, BOOL force)</td></tr>
<tr class="memdesc:a468fc9a7b3aed2267864cf1b37534ea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the target I2C port.  <a href="#a468fc9a7b3aed2267864cf1b37534ea3">More...</a><br /></td></tr>
<tr class="separator:a468fc9a7b3aed2267864cf1b37534ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4913cc2a08031f38a0a396b20e7d552c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a4913cc2a08031f38a0a396b20e7d552c">I2C_Transmit</a> (<a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *device, uint8_t *data, uint32_t len, BOOL ackRequired)</td></tr>
<tr class="memdesc:a4913cc2a08031f38a0a396b20e7d552c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit the identifier + requested data out over I2C.  <a href="#a4913cc2a08031f38a0a396b20e7d552c">More...</a><br /></td></tr>
<tr class="separator:a4913cc2a08031f38a0a396b20e7d552c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd101b0896d33d24748ee155fb4b2a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a7dd101b0896d33d24748ee155fb4b2a3">I2C_Receive</a> (<a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *device, uint8_t *data, uint32_t len, BOOL ackMessages)</td></tr>
<tr class="memdesc:a7dd101b0896d33d24748ee155fb4b2a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the.  <a href="#a7dd101b0896d33d24748ee155fb4b2a3">More...</a><br /></td></tr>
<tr class="separator:a7dd101b0896d33d24748ee155fb4b2a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e3863f83b01bc96b9788c045bd5d56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a25e3863f83b01bc96b9788c045bd5d56">I2C_TxRx</a> (<a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *device, uint8_t *dataTx, uint32_t lenTx, uint8_t *dataRx, uint32_t lenRx, BOOL ack, BOOL useRepeatedStart)</td></tr>
<tr class="memdesc:a25e3863f83b01bc96b9788c045bd5d56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a combined write + read process over I2C to a target device.  <a href="#a25e3863f83b01bc96b9788c045bd5d56">More...</a><br /></td></tr>
<tr class="separator:a25e3863f83b01bc96b9788c045bd5d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aacc28f3797ee123f69942ba8e2b96522"><td class="memItemLeft" align="right" valign="top">static I2C_MODULE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aacc28f3797ee123f69942ba8e2b96522">m_I2CModules</a> [I2C_NUMBER_OF_MODULES] = {0}</td></tr>
<tr class="separator:aacc28f3797ee123f69942ba8e2b96522"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements functions used to interact with the I2C bus and peripheral devices. </p>
<dl class="section note"><dt>Note</dt><dd>For references to functions, macros, and constants provided by Microchip, please see the library file:<ul>
<li>[mc32-install]-libs\include\peripheral\i2c.h</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The Wii target this library was designed for holds the SDA line low for ~7-8 ms after requesting the last byte of data. Adding a ~10 ms delay before setting stop condition prevents erroneous bus collisions.</dd>
<dd>
Many of the functions used in this file are blocking. Long term, a timeout would be a good idea, but skipping for current development timeframe. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a468fc9a7b3aed2267864cf1b37534ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a468fc9a7b3aed2267864cf1b37534ea3">&#9670;&nbsp;</a></span>I2C_InitPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_InitPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pbClk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the target I2C port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*port</td><td>Instance of 'I2C_Port{}' struct. Values used to define target to initialize and how it should be initialized. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pbClk</td><td>Current peripheral bus clock for device (referenced during I2C initialization). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">force</td><td>Boolean flag indicating if port should be reinitialized if already initialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>

</div>
</div>
<a id="a0b4407c31abf6dc307ccd22973b1a816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b4407c31abf6dc307ccd22973b1a816">&#9670;&nbsp;</a></span>I2C_ReadByte()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_ReadByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>ackByte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a single byte of data and optionally send an acknowledgement signal. </p>
<p>Waits until recevied data is available and updates the provided data pointer with the value read. If the acknowledgement flag is set, attempts to ack or nack and poll until ack or nack is successful.</p>
<dl class="section note"><dt>Note</dt><dd>This function does NOT handle bus start / stop. It is up to the caller to manage the full bus arbitration proces.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*port</td><td>Instance of 'I2C_Port{}' struct. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*data</td><td>Where to save byte read in from bus. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ackByte</td><td>Boolean flag indicating if a ACK/NACK bit should be transmitted (acknowledging receipt of byte). This is a boolean flag indicating if the process of acknowledging will occur. The actual NACK or ACK value is defined in the provided 'device' instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a0b4407c31abf6dc307ccd22973b1a816_icgraph.png" border="0" usemap="#i2c_8c_a0b4407c31abf6dc307ccd22973b1a816_icgraph" alt=""/></div>
<map name="i2c_8c_a0b4407c31abf6dc307ccd22973b1a816_icgraph" id="i2c_8c_a0b4407c31abf6dc307ccd22973b1a816_icgraph">
</map>
</div>

</div>
</div>
<a id="a7dd101b0896d33d24748ee155fb4b2a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dd101b0896d33d24748ee155fb4b2a3">&#9670;&nbsp;</a></span>I2C_Receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_Receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>ackMessages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from the. </p>
<p>Handles bus arbitration (start and stop). Ensures data is ready to be read and supervise the process of invoking a byte-by-byte read of all necessary data.</p>
<dl class="section warning"><dt>Warning</dt><dd>Presumes caller has appropriately allocated space for copying read data into.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The address for the I2C is defined in the 'device' parameter provided to the function and is transmitted prior to sending the provided 'len' of data (total data transmitted == 'len + 1').</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'I2C_Device{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*data</td><td>Buffer of data to populate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Amount of data to read (in bytes). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ackRequired</td><td>Flag indicating if an acknowledgement of data read should occur (the ack mode is defined in the 'device' instance).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a7dd101b0896d33d24748ee155fb4b2a3_cgraph.png" border="0" usemap="#i2c_8c_a7dd101b0896d33d24748ee155fb4b2a3_cgraph" alt=""/></div>
<map name="i2c_8c_a7dd101b0896d33d24748ee155fb4b2a3_cgraph" id="i2c_8c_a7dd101b0896d33d24748ee155fb4b2a3_cgraph">
</map>
</div>

</div>
</div>
<a id="aa8c6a720c14c9d481945c51dbf6ae07a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c6a720c14c9d481945c51dbf6ae07a">&#9670;&nbsp;</a></span>I2C_SendAddr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_SendAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>isReadRequest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmits the address to a target with the appropriate read/write bit set. </p>
<p>Serves as a wrapper to the private 'I2C_SendByte' method with the address formatted using the Microchip plib library methods.</p>
<dl class="section note"><dt>Note</dt><dd>This function does NOT handle bus start / stop. It is up to the caller to manage the full bus arbitration proces.</dd>
<dd>
Supports only the address sizes defined in the 'I2C_ADDR_LEN{}' enum.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'I2C_Device{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isReadRequest</td><td>Flag indicating if the R/W bit in the address should match 'I2C_READ' or 'I2C_WRITE'. A TRUE value == use 'I2C_READ'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_cgraph.png" border="0" usemap="#i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_cgraph" alt=""/></div>
<map name="i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_cgraph" id="i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_cgraph">
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_icgraph.png" border="0" usemap="#i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_icgraph" alt=""/></div>
<map name="i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_icgraph" id="i2c_8c_aa8c6a720c14c9d481945c51dbf6ae07a_icgraph">
</map>
</div>

</div>
</div>
<a id="a069cdc2bec983c627606ee4ef52d6155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a069cdc2bec983c627606ee4ef52d6155">&#9670;&nbsp;</a></span>I2C_SendByte()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_SendByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a single byte of data. </p>
<p>Waits until bus ready to transmit. Once the bus is ready, sends out the provided byte of data and polls until tranmission is done.</p>
<dl class="section note"><dt>Note</dt><dd>This function does NOT handle bus start / stop. It is up to the caller to manage the full bus arbitration proces.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*port</td><td>Instance of 'I2C_Port{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Byte of data to send out over bus.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a069cdc2bec983c627606ee4ef52d6155_icgraph.png" border="0" usemap="#i2c_8c_a069cdc2bec983c627606ee4ef52d6155_icgraph" alt=""/></div>
<map name="i2c_8c_a069cdc2bec983c627606ee4ef52d6155_icgraph" id="i2c_8c_a069cdc2bec983c627606ee4ef52d6155_icgraph">
</map>
</div>

</div>
</div>
<a id="a01cfbcaab1fb1d818fbe26109d9dd087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01cfbcaab1fb1d818fbe26109d9dd087">&#9670;&nbsp;</a></span>I2C_StartTransfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_StartTransfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>restart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set start condition for I2C bus. </p>
<p>Logic branches based on the 'restart' flag provided. For both start and restart conditions, functions from the Microchip peripheral library are invoked to execute the relevant command.</p>
<dl class="section warning"><dt>Warning</dt><dd>This is a blocking function. It will not return until the bus is idle.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>A "restart" condition is sending a start message while a data payload is already actively in transfer.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*port</td><td>Instance of 'I2C_Port{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">restart</td><td>Flag indicating if a 'restart' message should be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a01cfbcaab1fb1d818fbe26109d9dd087_icgraph.png" border="0" usemap="#i2c_8c_a01cfbcaab1fb1d818fbe26109d9dd087_icgraph" alt=""/></div>
<map name="i2c_8c_a01cfbcaab1fb1d818fbe26109d9dd087_icgraph" id="i2c_8c_a01cfbcaab1fb1d818fbe26109d9dd087_icgraph">
</map>
</div>

</div>
</div>
<a id="a0f251044af22435f4028967ecf838053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f251044af22435f4028967ecf838053">&#9670;&nbsp;</a></span>I2C_StopTransfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_StopTransfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#ad6be63921dc3537b6ea91b8a85088e13">I2C_Port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delay_Ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set stop condition for I2C bus. </p>
<p>Utilizes functions from the Microchip peripheral library to execute the relevant command.</p>
<dl class="section warning"><dt>Warning</dt><dd>This is a blocking function. It will not return until the bus is idle.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*port</td><td>Instance of 'I2C_Port{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">delay_Ms</td><td>Number of milliseconds to delay before asserting stop condition. Typically used when reading data from targets (vs sending commands).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a0f251044af22435f4028967ecf838053_icgraph.png" border="0" usemap="#i2c_8c_a0f251044af22435f4028967ecf838053_icgraph" alt=""/></div>
<map name="i2c_8c_a0f251044af22435f4028967ecf838053_icgraph" id="i2c_8c_a0f251044af22435f4028967ecf838053_icgraph">
</map>
</div>

</div>
</div>
<a id="a4913cc2a08031f38a0a396b20e7d552c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4913cc2a08031f38a0a396b20e7d552c">&#9670;&nbsp;</a></span>I2C_Transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_Transmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>ackRequired</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit the identifier + requested data out over I2C. </p>
<p>Handles bus arbitration (start and stop) and prepends the address indicated within the provided 'device' structure's address field.</p>
<dl class="section note"><dt>Note</dt><dd>The address for the I2C is defined in the 'device' parameter provided to the function and is transmitted prior to sending the provided 'len' of data (total data transmitted == 'len + 1').</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'I2C_Device{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*data</td><td>Buffer of data to send out over bus. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Amount of data to transfer [excluding address of target]. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ackRequired</td><td>Flag indicating if an acknowledgement of message transmission is required.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a4913cc2a08031f38a0a396b20e7d552c_cgraph.png" border="0" usemap="#i2c_8c_a4913cc2a08031f38a0a396b20e7d552c_cgraph" alt=""/></div>
<map name="i2c_8c_a4913cc2a08031f38a0a396b20e7d552c_cgraph" id="i2c_8c_a4913cc2a08031f38a0a396b20e7d552c_cgraph">
</map>
</div>

</div>
</div>
<a id="a25e3863f83b01bc96b9788c045bd5d56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e3863f83b01bc96b9788c045bd5d56">&#9670;&nbsp;</a></span>I2C_TxRx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="i2c_8h.html#af288c534bf72314260b6fba28e83049c">I2C_RC</a> I2C_TxRx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="i2c_8h.html#a8095fef92fc774331f4de4d9dd681645">I2C_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dataTx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lenTx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dataRx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lenRx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>ack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>useRepeatedStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a combined write + read process over I2C to a target device. </p>
<p>Handles bus arbitration (start and stop) and prepends the address indicated within the provided 'device' structure's address field. Ensures data is ready to be read and supervise the process of invoking a byte-by-byte read of all necessary data.</p>
<dl class="section warning"><dt>Warning</dt><dd>Presumes caller has appropriately allocated space for copying read data into.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The address for the I2C is defined in the 'device' parameter provided to the function and is transmitted prior to sending the provided 'len' of data (total data transmitted == 'len + 1').</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'I2C_Device{}' struct. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*dataTx</td><td>Buffer of data to send out over bus. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lenTx</td><td>Amount of data to transfer [excluding address of target]. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*dataRx</td><td>Buffer of data to populate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lenRx</td><td>Amount of data to read (in bytes). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ackRequired</td><td>Flag indicating if an acknowledgement of message should occur during tx and be expected during rx. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">useRepeatedStart</td><td>Boolean flag controlling if send repeated start rather than releasing and re-acquiring the bus between tx and rx. TRUE == send repeatedstart condition; FALSE == send STOP and then a fresh START condition.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'I2C_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8c_a25e3863f83b01bc96b9788c045bd5d56_cgraph.png" border="0" usemap="#i2c_8c_a25e3863f83b01bc96b9788c045bd5d56_cgraph" alt=""/></div>
<map name="i2c_8c_a25e3863f83b01bc96b9788c045bd5d56_cgraph" id="i2c_8c_a25e3863f83b01bc96b9788c045bd5d56_cgraph">
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aacc28f3797ee123f69942ba8e2b96522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacc28f3797ee123f69942ba8e2b96522">&#9670;&nbsp;</a></span>m_I2CModules</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">I2C_MODULE m_I2CModules[I2C_NUMBER_OF_MODULES] = {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="i2c_8c.html">i2c.c</a></li>
    <li class="footer">Generated on Wed Nov 7 2018 22:53:14 for I2C Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
